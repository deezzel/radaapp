<?xml version="1.0" encoding="UTF-8"?>
<!--To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.prime.com.tr/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    <ui:composition template="/template.xhtml">
        <ui:define name="body">
            <h:form prependId="false">
                <p:panel id="id_panela">
                    <p:dataGrid value="#{mainMB.lstArt}" var="publication" columns="1"  
                                rows="4" paginator="true" effect="true" 
                                paginatorPosition="bottom"
                                paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                                rowsPerPageTemplate="2,4,10">
                        <p:column>
                            <strong><h:outputText value="#{publication.title}" style="float: left" /></strong>
                            <h:outputLink value="Article_Comment.xhtml" style="float: right" styleClass="ll">
                                <f:param name="id_article" value="#{publication.id}"/>
                                <h:outputText value="подробней"/>
                            </h:outputLink>
                            <br></br>
                            <h:outputText value="#{publication.text}..." style="text-align: left; float: left" escape="false"/>

                            <c:if test="#{!mainMB.secretaryorDeputatos}">

                                <p:button outcome="UpdateArticle" image="ui-icon-pencil" title="Редактировать" style="float: right">
                                    <f:param name="idnew" value="#{publication.id}"/>
                                </p:button>
                                <p:commandButton title="Удалить" ajax="false" image="ui-icon-trash"  onclick="confirmation.show()" style="float: right; padding-right: 10px">
                                    <f:setPropertyActionListener target="#{mainMB.id_pub}" value="#{publication.id}"/>
                                </p:commandButton>
                            </c:if>
                            
                            <!--                        <br></br>-->
                            <!--                        <p:separator style="width:100%;height:5px" />-->
                        </p:column>
                    </p:dataGrid> 
                    
                     <p:confirmDialog message="Вы уверены что хотите удалить статью?"  
                                     header="Удаление" widgetVar="confirmation" appendToBody="true"> 
                        
                        <p:commandButton value="Да" ajax="true" actionListener="#{mainMB.delNews}" update="id_panela" onclick="confirmation.hide()"/>
                       
                        <p:commandButton value="Отмена" onclick="confirmation.hide()" />                    
                    </p:confirmDialog>                    
                    
                    <c:if test="${!mainMB.secretary or !mainMB.deputatos}">
                        <p:button title="Добавить" value="Добавить статью" outcome="AddArticle_Secret" image="ui-icon-plus"  style="float: right"/>
                    </c:if>
                </p:panel>
            </h:form>

        </ui:define>

    </ui:composition>
</html>
